package com.ericc.the.game.effects;

import com.badlogic.ashley.core.Engine;
import com.badlogic.ashley.core.Entity;
import com.ericc.the.game.Mappers;
import com.ericc.the.game.components.StatsComponent;

public class GrantInvulnerability implements Effect {
    int time;

    public GrantInvulnerability(int time) {
        this.time = time;
    }

    @Override
    public void apply(Entity entity, Engine engine) {
        StatsComponent stats = Mappers.stats.get(entity);
        if (stats != null) {
            stats.health += 100;
            stats.mana += 100;

            if (stats.health > stats.maxHealth) {
                stats.health = stats.maxHealth;
            }

            if (stats.mana > stats.maxMana) {
                stats.mana = stats.maxMana;
            }
            
            stats.invulnerabilityTime = Math.max(stats.invulnerabilityTime, time);
        }
    }
}
